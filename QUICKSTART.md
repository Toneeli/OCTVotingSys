# 快速开始指南

## 📦 项目已完成！

社区投票系统已完全构建完成，包括完整的后端和现代化的前端应用。

## 🚀 快速启动

### 步骤 1: 启动后端服务

打开第一个终端窗口，运行：

```bash
cd backend
npm run dev
```

你将看到输出：
```
Backend running on http://localhost:3001
```

### 步骤 2: 启动前端应用

打开第二个终端窗口，运行：

```bash
cd frontend
npm start
```

前端应用将自动打开 `http://localhost:3000`

## 📝 测试流程

### 1. 注册账户
- 点击"立即注册"
- 填写注册信息：
  - 用户名：test01
  - 密码：123456
  - 真实姓名：张三
  - 单元号：1-101
  - 电话：13800138000
- 点击注册

### 2. 等待管理员审核
- 注册后需要等待管理员审核
- 目前系统中任何 ID=1 的账户被认为是管理员

### 3. 创建第一个账户用于测试管理员功能
首次运行时，第一个注册的账户 ID 会是 1，可以作为管理员账户。

### 4. 审核用户（管理员功能）
- 使用管理员账户登录
- 进入"管理后台"
- 在"待审核业主"标签页审核其他用户
- 点击"批准"按钮

### 5. 创建投票议题
- 在"管理后台" > "投票议题管理"标签页
- 点击"创建议题"按钮
- 填写议题信息：
  - 标题：例如"小区绿化维护费用调整"
  - 描述：详细描述背景
  - 选项：每行一个，例如"同意"、"不同意"、"弃权"
- 点击创建

### 6. 投票
- 使用普通用户账户登录
- 在首页查看所有投票议题
- 点击议题进入详情页
- 选择投票选项
- 点击"确认投票"

### 7. 查看统计
- 投票后可以在详情页查看实时统计数据
- 显示每个选项的票数和百分比

## 📊 项目结构

```
community-voting-system/
├── backend/
│   ├── server.js              # 后端主文件
│   ├── voting.db              # SQLite数据库（运行时生成）
│   └── package.json           # 后端依赖
│
└── frontend/
    ├── public/                # 静态资源
    ├── src/
    │   ├── api/               # API 请求模块
    │   │   ├── auth.js        # 认证相关
    │   │   ├── voting.js      # 投票相关
    │   │   ├── admin.js       # 管理相关
    │   │   └── client.js      # HTTP 客户端
    │   ├── pages/             # 页面组件
    │   │   ├── Login.js       # 登录页
    │   │   ├── Register.js    # 注册页
    │   │   ├── TopicList.js   # 议题列表
    │   │   ├── TopicDetail.js # 议题详情
    │   │   └── AdminDashboard.js # 管理后台
    │   ├── components/        # 公共组件
    │   │   └── Layout.js      # 顶部导航布局
    │   ├── context/           # React Context
    │   │   └── AuthContext.js # 认证状态管理
    │   ├── App.js             # 主应用文件
    │   └── index.js           # 入口文件
    └── package.json           # 前端依赖
```

## 🔧 主要功能实现

### 后端 (Node.js + Express)
✅ SQLite 数据库初始化
✅ 业主注册和登录（JWT 认证）
✅ 密码加密存储（bcrypt）
✅ 投票议题 CRUD 操作
✅ 投票提交和验证
✅ 投票统计
✅ 业主审核管理
✅ CORS 跨域支持

### 前端 (React + Ant Design)
✅ 响应式设计（支持桌面和移动端）
✅ 用户认证系统
✅ Token 本地存储和自动刷新
✅ 路由管理（受保护的路由）
✅ 表单验证
✅ 实时投票统计
✅ 管理后台
✅ 现代化 UI 组件

## 🛠️ 技术细节

### 认证流程
1. 用户注册 → 密码加密存储 → 状态为 pending
2. 管理员审核 → 状态改为 approved
3. 用户登录 → 验证密码 → 生成 JWT Token
4. Token 存储在 localStorage → 后续请求自动携带

### 投票验证
1. 检查用户是否已投票（每个议题每个用户只能投一次）
2. 更新选项票数
3. 保存投票记录

### 权限管理
- 需要登录才能访问投票功能
- ID = 1 的用户被视为管理员
- 管理员可以创建议题和审核用户

## 📱 页面功能

| 页面 | 功能 | 访问权限 |
|------|------|--------|
| 登录页 | 用户登录 | 公开 |
| 注册页 | 用户注册 | 公开 |
| 议题列表 | 浏览所有投票议题 | 已登录用户 |
| 议题详情 | 投票、查看统计 | 已登录用户 |
| 管理后台 | 审核用户、创建议题 | 管理员 |

## 🔒 安全特性

- ✅ 密码加密存储（bcrypt）
- ✅ JWT 身份验证
- ✅ Token 自动过期（24小时）
- ✅ 防止重复投票
- ✅ CORS 防护
- ✅ 输入验证和错误处理

## 💡 扩展建议

未来可以添加的功能：
- 📧 邮件通知
- 📱 短信提醒
- 📊 数据导出（Excel/PDF）
- 🔐 双因素认证
- 💬 投票评论功能
- 📈 高级统计分析
- 🌐 多语言支持
- 🎨 主题切换

## ❓ 常见问题

**Q: 如何重置数据库？**
A: 删除 `backend/voting.db` 文件，重启后端服务会自动创建新数据库。

**Q: 如何修改 JWT 密钥？**
A: 编辑 `backend/server.js` 中的 `JWT_SECRET` 变量。

**Q: 前端连接不到后端？**
A: 确保后端服务运行在 localhost:3001，并检查 CORS 配置。

**Q: 用户登录失败？**
A: 检查用户状态是否为 "approved"。

## 📞 支持

如有问题，请检查：
1. 后端服务是否运行
2. 前端是否正确连接到后端
3. 浏览器控制台是否有错误信息
4. 数据库是否初始化正确

祝你使用愉快！🎉
