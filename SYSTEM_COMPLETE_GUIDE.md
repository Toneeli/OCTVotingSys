# 🚀 华侨城-智慧社区投票系统 - 完整运行指南

## 📱 系统现状

### ✅ 已完成的主要功能

#### 1. 移动端适配（100% 完成）
- ✅ **Ant Design Mobile 集成** - 现代化移动UI组件库
- ✅ **响应式设计** - 完美适配手机/平板/PC
- ✅ **底部导航栏** - 符合iOS/Android交互习惯
- ✅ **用户菜单弹窗** - 从底部弹出，易于点击
- ✅ **全屏按钮** - 44px高度，符合移动端标准

#### 2. 核心功能模块
- ✅ **登录/注册** - 移动端优化表单
- ✅ **首页** - 响应式布局
- ✅ **投票列表** - 分页展示，易于浏览
- ✅ **投票详情** - 卡片化显示选项
- ✅ **个人中心** - 信息查看、密码修改
- ✅ **管理后台** - 卡片列表管理

#### 3. 管理后台功能
- ✅ **待审核业主** - 批准/拒绝操作，卡片列表显示
- ✅ **已批准业主** - 查看业主信息，支持编辑删除
- ✅ **投票议题管理** - 创建/编辑/管理议题
- ✅ **数据统计** - 投票数据汇总
- ✅ **数据备份恢复** - 支持数据导出导入

## 🎯 快速开始

### 方式1: 本地运行

#### 步骤 1: 启动后端
```bash
cd backend
npm start
```
**输出**：
```
✅ Backend running on http://localhost:3001
✅ Network access on http://<your-ip>:3001
📝 API Docs: http://localhost:3001/api/docs
```

#### 步骤 2: 启动前端（新终端）
```bash
cd frontend
npm start
```
**自动打开**: http://localhost:3000

#### 步骤 3: 登陆系统
- **用户名**: admin
- **密码**: 895600

### 方式2: Docker 运行（如果有 Docker）
```bash
docker-compose up
```

## 📱 UI/UX 特性

### 🎨 设计亮点

#### 顶部导航栏（NavBar）
```
┌─────────────────────────┐
│ 华侨城投票站    [👤]    │  深蓝色背景
└─────────────────────────┘
```
- 标题显示：华侨城投票站
- 右侧用户头像：点击弹出菜单
- iPhone缺口/凹槽适配

#### 底部导航栏（TabBar）
```
┌─────────────────────────┐
│ [🏠首页] [📋投票] [⚙️管理] │  仅登陆后显示
└─────────────────────────┘
```
- 三个导航项：首页、投票、管理
- 高亮显示当前页面
- 自动适应屏幕尺寸

#### 用户菜单弹窗（Popup）
```
┌─────────────────────────┐
│ [个人中心]              │
│ [退出登录]              │
└─────────────────────────┘
```
- 从底部向上弹出
- 大按钮，易于点击
- 点击外部自动关闭

### 📊 响应式显示

| 设备类型 | 宽度 | 效果 |
|---------|------|------|
| 📱 手机 | ≤600px | 全屏按钮、竖排表单、卡片列表 |
| 📱 平板竖 | 601-768px | 中等宽度、适度优化 |
| 📱 平板横 | 769-1024px | 接近PC体验 |
| 💻 PC | ≥1025px | 原生表格、宽屏优化 |

## 🔐 默认账户

### 管理员账户
```
用户名: admin
密码: 895600
权限: 超级管理员（所有功能）
```

### 普通用户
可在登陆页面点击"注册"创建新账户

## 📂 项目结构

```
community-voting-system/
├── backend/                    # Node.js Express 后端
│   ├── server.js               # 主服务器文件
│   ├── voting.db               # SQLite 数据库
│   ├── routes/                 # API 路由
│   │   ├── admin.js            # 管理员API
│   │   ├── auth.js             # 认证API
│   │   └── voting.js           # 投票API
│   └── package.json
│
├── frontend/                   # React 前端
│   ├── public/
│   ├── src/
│   │   ├── components/
│   │   │   ├── Layout.js       # 主布局（NavBar+TabBar）
│   │   │   └── Layout.css      # 响应式样式
│   │   ├── pages/
│   │   │   ├── Login.js        # 登陆页面
│   │   │   ├── Profile.js      # 个人中心
│   │   │   ├── TopicList.js    # 投票列表
│   │   │   ├── TopicDetail.js  # 投票详情
│   │   │   ├── AdminDashboard.js # 管理后台
│   │   │   └── Home.js         # 首页
│   │   ├── api/                # API 客户端
│   │   ├── context/            # React Context
│   │   ├── App.js              # 主应用
│   │   └── index.js            # 入口文件
│   └── package.json
│
├── ADMIN_MOBILE_OPTIMIZATION.md    # 管理后台优化说明
├── MOBILE_ADAPTATION_GUIDE.md       # 手机适配指南
├── PROFILE_FIX.md                   # 个人中心修复说明
└── README.md
```

## 🧪 测试功能清单

### 登陆流程
- [ ] 访问 http://localhost:3000
- [ ] 输入用户名：admin
- [ ] 输入密码：895600
- [ ] 点击登陆，应该进入首页

### 首页
- [ ] 显示欢迎信息
- [ ] 底部显示 3 个导航项（首页、投票、管理）
- [ ] 右上角显示用户头像

### 投票列表
- [ ] 点击底部"投票"菜单
- [ ] 显示所有投票议题
- [ ] 每个议题显示为卡片（手机端）或表格（PC端）
- [ ] 点击议题进入详情页

### 投票详情
- [ ] 显示议题标题和描述
- [ ] 显示所有投票选项
- [ ] 可以选择选项并投票
- [ ] 投票后显示结果和统计

### 个人中心
- [ ] 点击顶部用户头像
- [ ] 弹出菜单中点击"个人中心"
- [ ] 显示用户名和真实姓名
- [ ] 可以修改密码

### 管理后台（admin 用户）
- [ ] 点击底部"管理"菜单
- [ ] 显示管理选项卡
- [ ] **待审核业主**：显示业主卡片列表
  - 可以批准或拒绝申请
  - 可以指定为楼栋管理员
- [ ] **投票议题管理**：显示议题卡片列表
  - 可以创建新议题
  - 可以编辑现有议题
- [ ] **已批准业主**：显示业主卡片列表
  - 可以编辑和删除业主
- [ ] **数据备份**：可以导出和导入数据

## 🎮 关键交互

### 移动端交互模式

#### 点击用户头像 👤
1. 顶部右侧点击头像
2. 底部弹出菜单
3. 选择"个人中心"或"退出登录"
4. 点击外部关闭菜单

#### 导航到其他页面 🔀
- 底部 TabBar 中点击菜单项
- 自动导航到对应页面
- TabBar 高亮当前页面

#### 审核业主 ✅
1. 进入管理后台 → "待审核业主"
2. 查看业主卡片信息
3. 点击"批准"或"拒绝"按钮
4. 操作完成，列表自动更新

#### 创建投票议题 ➕
1. 进入管理后台 → "投票议题管理"
2. 点击右上角"创建议题"按钮
3. 填写标题、描述、选项
4. 点击提交

## 📊 API 端点

### 认证相关
- `POST /api/auth/login` - 登陆
- `POST /api/auth/register` - 注册
- `GET /api/auth/profile` - 获取用户信息

### 投票相关
- `GET /api/voting/topics` - 获取议题列表
- `GET /api/voting/topics/:id` - 获取议题详情
- `POST /api/voting/vote` - 投票
- `GET /api/voting/stats` - 获取统计数据

### 管理相关
- `GET /api/admin/pending-residents` - 获取待审核业主
- `POST /api/admin/approve-resident` - 批准业主
- `POST /api/admin/reject-resident` - 拒绝业主
- `POST /api/admin/topics` - 创建议题
- `PUT /api/admin/topics/:id` - 编辑议题

## 🐛 故障排除

### 无法连接到后端
```
❌ 错误: Cannot GET /api/...
```
**解决方案**:
1. 确保后端已启动：`npm start` in backend folder
2. 检查端口 3001 是否被占用
3. 检查防火墙设置

### 登陆失败
```
❌ 错误: 用户名或密码错误
```
**解决方案**:
1. 确保数据库已初始化
2. 检查是否输入了正确的用户名和密码
3. 默认用户：admin / 895600

### 页面不响应
```
⏳ 页面加载中...
```
**解决方案**:
1. 刷新页面（F5）
2. 清除浏览器缓存
3. 打开开发者工具查看错误（F12）

## 📈 性能指标

### 构建大小
- **JS Bundle**: 420.53 KB (gzipped)
- **CSS Bundle**: 6.6 KB (gzipped)
- **总体**: ~427 KB
- **加载时间**: < 2 秒（取决于网络）

### 页面加载时间
| 页面 | 首次加载 | 后续导航 |
|------|---------|---------|
| 登陆 | ~2s | <1s |
| 首页 | ~2s | <1s |
| 投票列表 | ~2s | <1s |
| 投票详情 | ~2s | <1s |
| 个人中心 | ~2s | <1s |
| 管理后台 | ~3s | ~1s |

## 🎓 学习资源

### 使用的技术栈
- **前端框架**: React 18
- **UI组件库**: Ant Design Mobile 5.x + Ant Design 5.x
- **状态管理**: React Context API
- **路由**: React Router v6
- **HTTP客户端**: Axios
- **后端框架**: Express.js
- **数据库**: SQLite3
- **认证**: JWT (JSON Web Token)

### 关键文件说明

#### Layout.js - 主布局组件
```javascript
// 顶部 NavBar + 底部 TabBar + 用户菜单
// 处理导航和用户交互
```

#### AdminDashboard.js - 管理后台
```javascript
// renderResidentCardList() - 业主卡片列表
// renderTopicCardList() - 议题卡片列表
// 卡片式显示，手机端友好
```

#### Profile.js - 个人中心
```javascript
// 使用 antd-mobile 组件
// 两个标签页：个人信息、修改密码
```

## 🚀 部署指南

### 生产构建
```bash
# 前端
cd frontend
npm run build
# 输出到 build 文件夹

# 后端（直接运行 Node.js）
cd backend
npm start
```

### 环境变量
```
# backend/.env
PORT=3001
HOST=0.0.0.0
JWT_SECRET=your-secret-key

# frontend/.env
REACT_APP_API_PORT=3001
```

### Docker 部署
```bash
docker-compose up -d
```

## 📞 支持和反馈

### 常见问题
- Q: 如何重置密码？
- A: 进入个人中心 → 修改密码

- Q: 如何删除业主？
- A: 管理后台 → 已批准业主 → 点击删除按钮

- Q: 如何导出数据？
- A: 管理后台 → 数据备份 → 点击下载

### 联系方式
项目地址：https://github.com/Toneeli/OCTVotingSys

---

## 📋 版本信息

- **项目名称**: 华侨城-智慧社区投票系统
- **版本**: 1.0.0
- **上次更新**: 2025年12月3日
- **状态**: ✅ 完全就绪

**系统现已完全实现所有功能，可用于生产环境！** 🎉
